<!-- https://developers.paymentez.com/docs/payments -->
<!DOCTYPE html>
<html>
  <head>
    <title>Example | Payment Checkout Js</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script
      src="https://cdn.paymentez.com/ccapi/sdk/payment_checkout_stable.min.js"
      charset="UTF-8"
    ></script>
  </head>

  <body>
    <p id="casa"></p>
    <p>
      <button class="js-payment-checkout">Pay with Card</button>
    </p>

    <div id="response"></div>

    <script>
      let paymentCheckout = new PaymentCheckout.modal({
        client_app_code: "TESTSOSCARSTG-CO-CLIENT",
        client_app_key: "SQGX9azTzh5zktMlYcYj5KtU9Njs5z",
        locale: "es", // 'QRRBMOTT-RED-JCJARAMILLOs preferred language (es, en, pt). English will be used by default.
        env_mode: "stg", // `prod`, `stg`, `local` to change environment. Default is `stg`
        onOpen: function () {
          console.log("modal open");
        },
        onClose: function () {
          console.log("modal closed");
        },
        onResponse: function (response) {
          // The callback to invoke when the Checkout process is completed

          /*
              In Case of an error, this will be the response.
              response = {s
                "error": {
                  "type": "Server Error",
                  "help": "Try Again Later",
                  "description": "Sorry, there was a problem loading Checkout."
                }
              }

              When the User completes all the Flow in the Checkout, this will be the response.
              response = {
                "transaction":{
                    "status": "success", // success or failure
                    "id": "CB-81011", // transaction_id
                    "status_detail": 3 // for the status detail please refer to: https://paymentez.github.io/api-doc/#status-details
                }
              }
            */
          console.log("modal response");
          $("#casa").text(JSON.stringify(response));
        },
      });

      let btnOpenCheckout = document.querySelector(".js-payment-checkout");
      btnOpenCheckout.addEventListener("click", function () {
        paymentCheckout.open({
          user_id: "007",
          user_email: "orodriguez@paymentez.com", //optional
          user_phone: "3002393616", //optional
          order_description: "Prueba de integraci√≥n",
          order_amount: 1,
          order_vat: 0,
          order_reference: "#ref-prueba",
          order_installments_type: 3,
          //conf_exclusive_types: 'mc'
          //order_installments_type: 0, // optional: The installments type are only available for Equador. The valid values are: https://paymentez.github.io/api-doc/#installments-type
          //order_taxable_amount: 0, // optional: Only available for Datafast (Equador). The taxable amount, if it is zero, it is calculated on the total. Format: Decimal with two fraction digits.
          //order_tax_percentage: 10 // optional: Only available for Datafast (Equador). The tax percentage to be applied to this order.
        });
      });

      window.addEventListener("popstate", function () {
        paymentCheckout.close();
      });
    </script>
  </body>
</html>
