<mat-toolbar class="header-toolbar">
  <mat-toolbar-row>
    <!--    <img src="assets/images/store-logo-transp-simple.png" alt="Store logo" routerLink="/home">-->
    <nav>
      <a routerLink="/home" routerLinkActive="active" color="primary">
        <mat-icon>home</mat-icon>
        Inicio
      </a>
      <a
        *ngIf="availableProductRoles.indexOf(loginService.role) != -1"
        routerLink="/products"
        routerLinkActive="active"
        color="primary"
      >
        Productos
      </a>
    </nav>
    <div class="user-buttons">
      <a
        *ngIf="!loginService.isLogged"
        routerLink="/auth/login"
        mat-mini-fab
        color="primary"
      >
        <mat-icon>person</mat-icon>
      </a>

      <a *ngIf="loginService.role == 'Usuario Registrado'">
        <a
          routerLink="/user/purchases"
          routerLinkActive="active"
          style="color: white"
        >
          <mat-icon>credit_card</mat-icon>
          Mis compras
        </a>
      </a>

      <a *ngIf="loginService.role == 'Administrador'">
        <mat-select placeholder="Entidades" type="number" list="entities">
          <mat-option *ngFor="let entitie of entities">
            <a class="entities" [routerLink]="[entitie.url]">{{
              entitie.name
            }}</a>
          </mat-option>
        </mat-select>
      </a>

      <button
        *ngIf="
          loginService.role == 'Administrador' ||
          loginService.role == 'Usuario Registrado'
        "
        mat-raised-button
        [matMenuTriggerFor]="menu"
      >
        <span
          style="margin-right: 10px"
          [matBadge]="total"
          matBadgeOverlap="false"
          matBadgeColor="warn"
          matBadgePosition="below after"
          ><mat-icon>shopping_cart</mat-icon>Carrito</span
        >
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item *ngFor="let p of products">
          {{
            p.configurations[p.configurations.length - 1].configuration
              .sub_configuration
          }}
          - {{ p.name }}
          {{
            p.price *
              p.configurations[p.configurations.length - 1].configuration
                .sub_configuration | currency
          }}
          <button (click)="quitar(p)" mat-icon-button color="warn">
            <mat-icon> delete </mat-icon>
          </button>
        </button>
        <button mat-menu-item>
          <strong>Total: {{ totalp() | currency }}</strong>
        </button>
        <a *ngIf="products.length > 0" mat-menu-item routerLink="/check_out">
          <mat-icon>shopping_cart</mat-icon>
          Terminar compra</a
        >
      </mat-menu>

      <button
        *ngIf="loginService.isLogged"
        (click)="logout()"
        mat-raised-button
        color="accent"
      >
        Cerrar
      </button>
    </div>
  </mat-toolbar-row>
</mat-toolbar>
